let t=[],e=0;function n(t,e){const n=Math.ceil(e/t.length);return t.repeat(n).slice(0,e)}function r(){const n=t[e];return e+=1,n}function o(n){const r=t.slice(e,e+n).reverse().join("");return e+=n,r}let s=0;function c(t,e){const n=e.length;if(t.length<n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function i(i){const l=i.slice(17152,32768),f=c(l,new Uint8Array([0,112,120,97])),a=c(l,new Uint8Array([58,99,58,0])),h=l.slice(4);if(f){return function(s){const c=s[0]<<8|s[1],i=[];for(let t=0;t<256;t++)i.push(t);const l=s.slice(4);t=[];for(let e=0;e<l.length;e++){const n=l[e].toString(2).padStart(8,"0").split("").reverse();t.push(...n)}let f="";for(e=0;f.length<c;)if("1"===r()){let t=0;for(;"1"===r();)t+=1;const e=(1<<t)-1,n=o(t+4),s=parseInt(n,2)+(e<<4);f+=String.fromCharCode(i[s]);const c=i.splice(s,1);i.unshift(c[0])}else{let t;t="1"===r()?"1"===r()?5:10:15;const e=o(t),s=parseInt(e,2)+1;let c=3;for(;;){const t=o(3),e=parseInt(t,2);if(c+=e,7!==e)break}if(s>f.length)throw console.warn("offset 大于 code 长度",s,f.length,f),new Error("offset 大于 code 长度");let i="";i=c>=s?f.slice(-s):f.slice(-s,-s+c),c>s&&(i+=n(i,c-s)),f+=i}return f}(h)}if(a){return function(t){const e=t[0]<<8|t[1],n=t.slice(4);let r="";for(s=0;r.length<e;){const t=n[s];if(0===t)r+=String.fromCharCode(n[s+1]),s+=2;else if(t<=59)r+="\n 0123456789abcdefghijklmnopqrstuvwxyz!#%(){}[]<>+=/*:;.,~_"[t-1],s++;else{const e=n[s+1],o=16*(t-60)+(15&e),c=2+(e>>4),i=r.length-o,l=r.slice(i,i+c);r+=l,s+=2}}return r}(h)}return function(t){let e="";for(let n=0;n<t.length;n++){const r=t[n];0!==r&&(e+=String.fromCharCode(r))}return e}(l)}async function l(t){var e;const n=function(t){const e=new Uint8Array(t.length/4);for(let n=0;n<t.length;n+=4){const r=3&t[n],o=3&t[n+1],s=3&t[n+2],c=(3&t[n+3])<<6|r<<4|o<<2|s;e[n/4]=c}return e}(await(e=t,new Promise(((t,n)=>{const r=new Image;r.onload=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");e.width=r.width,e.height=r.height,n.drawImage(r,0,0);const o=n.getImageData(0,0,e.width,e.height).data;t(o)},r.onerror=()=>{n(new Error("无法加载图片"))},r.src=e}))));return{asset:undefined,code:i(n)}}export{l as readP8};
